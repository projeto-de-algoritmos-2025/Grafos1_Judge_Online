class Solution:
    def isBipartite(self, graph: List[List[int]]) -> bool:
        odds = [0] * len(graph)
        def bipartite (i):
            if odds[i]:
                return True
            odds[i] = -1
            q = deque([i])

            while q:
                i = q.popleft()
                for nei in graph[i]:
                    if odds[nei] == odds[i]:
                        return False
                    elif not odds[nei]:
                        q.append(nei)
                        odds[nei] = -odds[i]
            return True


        for i in range(len(graph)):
            if not bipartite(i):
                return False
        return True